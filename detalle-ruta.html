<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Ruta - Mochileros Sin Fronteras</title>
    <link rel="stylesheet" href="./style/index.css">
    <link rel="stylesheet" href="./style/components.css">
    <link rel="stylesheet" href="./style/detalle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="script/versionb.js"></script>
</head>
<body>
    <script>console.log('DOM cargado, ejecutando scripts...');</script>
    <nav class="navbar">
        <div class="nav-brand">
            <img src="images/Logo.png" height="40" width="40" alt="Logo">
            <span>Mochileros Sin Fronteras</span>
        </div>
        <button class="nav-toggle" aria-label="Abrir menÃº" aria-expanded="false">
            <span></span><span></span><span></span>
        </button>
        <ul class="nav-menu">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="buscar-rutas.html">Rutas</a></li>
            <li><a href="otros-rincones.html">Otros rincones</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li><a href="comunidad.html">Comunidad</a></li>
            <li><a href="contacto.html">Contacto</a></li>
            <li>
                <select name="idioma" id="idioma">
                    <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
                    <option value="en">ðŸ‡¬ðŸ‡§ English</option>
                </select>
            </li>
        </ul>
        <div class="nav-actions">
            <button class="btn-icon" aria-label="Buscar">
                <i class="fas fa-search"></i>
            </button>
        </div>
        
        <!-- Perfil en Navbar -->
        <div class="perfil-wrapper">
            <span id="nombreUsuario" class="nombre-usuario"></span>
            
            <!-- BotÃ³n Mi Cuenta (solo visible sin login) -->
            <button id="botonCuenta" class="btn btn-primary">
                <i class="fas fa-user-circle"></i>
                <span>Mi Cuenta</span>
            </button>
            
            <!-- Foto de perfil (solo visible con login) -->
            <img id="fotoPerfil" class="foto-perfil" src="img/default.png" style="display: none;">

            <div class="user-menu" id="userMenu">
                <button id="btnMiPerfil" class="btn btn-primary">Mi perfil</button>
                <button class="btn btn-primary">Mis Amigos</button>
                <button class="btn btn-primary">Mis Rutas</button>
                <button class="btn btn-secondary btn-block" onclick="cerrarSesion()">Cerrar sesiÃ³n</button>
            </div>
            
            <div class="user-menu-no-login" id="userMenuNoLogin">
                <button class="btn btn-primary btn-block" onclick="window.location.href='registro.html'">Iniciar sesiÃ³n</button>
                <button class="btn btn-secondary btn-block" onclick="window.location.href='registro.html'">Registrarse</button>
            </div>
        </div>
    </nav>

    <!-- Popup Cerrar SesiÃ³n -->
    <div id="popupCerrarSesion" class="popup">
        <div class="popup-content">
            <p>Â¿EstÃ¡s seguro de que quieres cerrar sesiÃ³n?</p>
            <button id="confirmarCerrar" class="btn btn-primary">SÃ­, cerrar sesiÃ³n</button>
            <button id="cancelarCerrar" class="btn btn-secondary">Cancelar</button>
        </div>
    </div>

    <!-- Breadcrumb -->
    <div class="breadcrumb-container">
        <nav class="breadcrumb">
            <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
            <i class="fas fa-chevron-right"></i>
            <a href="buscar-rutas.html">Rutas</a>
            <i class="fas fa-chevron-right"></i>
            <span id="breadcrumbTitle"></span>
        </nav>
    </div>

    <main class="route-detail-main">
        <!-- Header de la ruta -->
        <section class="route-header-section">
            <div class="route-header-content">
                <div class="route-header-info">
                    <div class="route-badges-top" id="routeBadges">
                        <!-- Badges dinÃ¡micos -->
                    </div>
                    <h1 id="routeTitle"></h1>
                    <div class="route-location-header">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="routeLocation"></span>
                    </div>
                    <div class="route-meta-header">
                        <div class="rating-large">
                            <i class="fas fa-star"></i>
                            <span class="rating-number" id="routeRating"></span>
                            <span class="rating-reviews">(<span id="reviewsCount"></span> opiniones)</span>
                        </div>
                        <div class="route-stats">
                            <div class="stat-item">
                                <i class="fas fa-route"></i>
                                <span><strong id="routeDistance"></strong> km</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users"></i>
                                <span><strong id="routeTravelers"></strong> viajeros</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span><strong id="routeFavorites"></strong> favoritos</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="route-header-price">
                    <div class="price-card">
                        <div class="price-label">Desde</div>
                        <div class="price-amount">
                            <span class="currency">â‚¬</span><span id="routePrice"></span>
                        </div>
                        <div class="price-per">por persona</div>
                        <button class="btn btn-primary btn-lg btn-block" id="bookNowBtn">
                            <i class="fas fa-calendar-check"></i> Reservar ahora
                        </button>
                        <button class="btn btn-outline btn-block" id="addToFavBtn">
                            <i class="far fa-heart"></i> Guardar en favoritos
                        </button>
                        <div class="share-buttons" id="shareButtons">
                            <!-- Botones de compartir dinÃ¡micos -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- GalerÃ­a de imÃ¡genes -->
        <section class="route-gallery">
            <div class="gallery-main">
                <img src="" alt="Imagen principal" id="mainImage">
                <button class="gallery-fullscreen" id="fullscreenBtn">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            <div class="gallery-thumbnails" id="galleryThumbnails">
                <!-- Thumbnails dinÃ¡micos -->
            </div>
        </section>

        <div class="route-detail-container">
            <!-- Contenido principal -->
            <div class="route-main-content">
                <!-- Tabs de navegaciÃ³n -->
                <nav class="tabs-nav">
                    <button class="tab-btn active" data-tab="overview">
                        <i class="fas fa-info-circle"></i> DescripciÃ³n
                    </button>
                    <button class="tab-btn" data-tab="itinerary">
                        <i class="fas fa-list"></i> Itinerario
                    </button>
                    <button class="tab-btn" data-tab="map">
                        <i class="fas fa-map"></i> Mapa
                    </button>
                    <button class="tab-btn" data-tab="reviews">
                        <i class="fas fa-star"></i> Opiniones
                    </button>
                </nav>

                <!-- Tab: DescripciÃ³n -->
                <div class="tab-content active" id="overview">
                    <div class="content-section">
                        <h2>Sobre esta ruta</h2>
                        <p class="lead" id="routeShortDescription"></p>
                        <p class="lead" id="routeDescription"></p>
                    </div>

                    <div class="content-section">
                        <h2>Â¿QuÃ© incluye?</h2>
                        <div class="includes-grid" id="includesGrid">
                            <!-- Items dinÃ¡micos -->
                        </div>
                    </div>

                    <div class="content-section">
                        <h2>Requisitos y recomendaciones</h2>
                        <div class="requirements-list" id="requirementsList">
                            <!-- Requisitos dinÃ¡micos -->
                        </div>
                    </div>
                </div>

                <!-- Tab: Itinerario -->
                <div class="tab-content" id="itinerary">
                    <div class="itinerary-timeline" id="itineraryTimeline">
                        <!-- DÃ­as dinÃ¡micos -->
                    </div>
                </div>

                <!-- Tab: Mapa -->
                <div class="tab-content" id="map">
                    <div class="map-section">
                        <div id="routeMap" class="route-map"></div>
                        <div class="map-info" id="mapInfo">
                            <!-- Info dinÃ¡mica del recorrido -->
                        </div>
                    </div>

                    <div class="elevation-section">
                        <h3>Perfil de elevaciÃ³n</h3>
                        <canvas id="elevationChart"></canvas>
                    </div>
                </div>

                <!-- Tab: Opiniones -->
                <div class="tab-content" id="reviews">
                    <div class="reviews-summary" id="reviewsSummary">
                        <!-- Resumen dinÃ¡mico -->
                    </div>

                    <div class="reviews-filters" id="reviewsFilters">
                        <!-- Botones dinÃ¡micos -->
                    </div>

                    <div class="reviews-list" id="reviewsList">
                        <!-- ReseÃ±as dinÃ¡micas -->
                    </div>

                    <button class="btn btn-outline btn-lg btn-block" id="loadMoreReviewsBtn">
                        <i class="fas fa-plus"></i> Cargar mÃ¡s opiniones
                    </button>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="route-sidebar">
                <div class="widget weather-widget">
                    <h3><i class="fas fa-cloud-sun"></i> Clima actual</h3>
                    <div id="weatherData" class="weather-data">
                        <div class="weather-main">
                            <img src="" alt="Clima" id="weatherIcon" class="weather-icon">
                            <div class="weather-temp">
                                <span id="temperature"></span>Â°C
                            </div>
                        </div>
                        <p id="weatherDescription"></p>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <i class="fas fa-tint"></i>
                                <span><span id="humidity"></span>% humedad</span>
                            </div>
                            <div class="weather-detail">
                                <i class="fas fa-wind"></i>
                                <span><span id="windSpeed"></span> km/h</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="widget organizer-widget">
                    <h3><i class="fas fa-user-circle"></i> Organizador</h3>
                    <div class="organizer-info">
                        <img src="" alt="Organizador" class="organizer-avatar" id="organizerAvatar">
                        <div>
                            <h4 id="organizerName"></h4>
                            <div class="organizer-rating" id="organizerRating"></div>
                        </div>
                    </div>
                    <p id="organizerDescription"></p>
                    <button class="btn btn-outline btn-block" id="contactOrganizerBtn">
                        <i class="fas fa-envelope"></i> Contactar
                    </button>
                </div>

                <div class="widget similar-routes-widget">
                    <h3><i class="fas fa-route"></i> Rutas similares</h3>
                    <div class="similar-routes-list" id="similarRoutesList">
                        <!-- Rutas similares dinÃ¡micas -->
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Mochileros Sin Fronteras</h3>
                <p>Tu comunidad de viajeros y aventureros. Descubre el mundo con nosotros.</p>
                <div class="social-links" id="footerSocialLinks">
                    <!-- Redes dinÃ¡micas -->
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Enlaces RÃ¡pidos</h4>
                <ul id="footerQuickLinks">
                    <!-- Links dinÃ¡micos -->
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Legal</h4>
                <ul id="footerLegalLinks">
                    <!-- Links legales dinÃ¡micos -->
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Newsletter</h4>
                <p>Recibe nuestras Ãºltimas novedades</p>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" placeholder="Tu email" required>
                    <button type="submit" class="btn btn-primary">Suscribirse</button>
                </form>
            </div>
        </div>
        <div class="footer-bottom" id="footerBottom">
            <p>&copy; <span id="currentYear"></span> Mochileros Sin Fronteras. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script/detalle-ruta.js"></script>
    <script src="script/nav.js"></script>
</body>
</html>
