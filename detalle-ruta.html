<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page_title_route_detail">Detalle de Ruta - Mochileros Sin Fronteras</title>
    <link rel="stylesheet" href="./style/index.css">
    <link rel="stylesheet" href="./style/components.css">
    <link rel="stylesheet" href="./style/detalle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="script/versionb.js"></script>
</head>
<body>
    <script>console.log('DOM cargado, ejecutando scripts...');</script>
    <nav class="navbar">
        <div class="nav-brand">
            <img src="images/Logo.png" height="40" width="40" alt="Logo">
            <span data-i18n="brand">Mochileros Sin Fronteras</span>
        </div>
        <button class="nav-toggle" aria-label="Abrir menÃº" aria-expanded="false">
            <span></span><span></span><span></span>
        </button>
        <ul class="nav-menu">
            <li><a href="index.html" data-i18n="nav_home">Inicio</a></li>
            <li><a href="buscar-rutas.html" data-i18n="nav_routes">Rutas</a></li>
            <li><a href="otros-rincones.html" data-i18n="nav_cities">Ciudades</a></li>
            <li><a href="blog.html" data-i18n="nav_blog">Blog</a></li>
            <li><a href="comunidad.html" data-i18n="nav_community">Comunidad</a></li>
            <li><a href="contacto.html" data-i18n="nav_contact">Contacto</a></li>
            <li>
                <select name="idioma" id="idioma">
                    <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
                    <option value="en">ðŸ‡¬ðŸ‡§ English</option>
                </select>
            </li>
        </ul>
        <div class="nav-actions">
            <button class="btn-icon" aria-label="Buscar">
                <i class="fas fa-search"></i>
            </button>
        </div>

        <!-- Perfil en Navbar -->
        <div class="perfil-wrapper">
            <span id="nombreUsuario" class="nombre-usuario"></span>
            
            <!-- BotÃ³n Mi Cuenta (solo visible sin login) -->
            <button id="botonCuenta" class="btn btn-primary">
                <i class="fas fa-user-circle"></i>
                <span data-i18n="btn_my_account">Mi Cuenta</span>
            </button>
            
            <!-- Foto de perfil (solo visible con login) -->
            <img id="fotoPerfil" class="foto-perfil" src="img/default.png" alt="Foto de perfil" style="display: none;">

            <div class="user-menu" id="userMenu">
                <button id="btnMiPerfil" class="btn btn-primary" data-i18n="profile_profile">Mi perfil</button>
                <button class="btn btn-primary" data-i18n="profile_friends">Mis Amigos</button>
                <button class="btn btn-secondary btn-block" data-i18n="profile_logout" onclick="cerrarSesion()">Cerrar sesiÃ³n</button>
            </div>
            
            <div class="user-menu-no-login" id="userMenuNoLogin">
                <button class="btn btn-primary btn-block" onclick="window.location.href='index.html#SidebarLogin'" data-i18n="auth_login">Iniciar sesiÃ³n</button>
                <button class="btn btn-secondary btn-block" onclick="window.location.href='registro.html'" data-i18n="auth_register">Registrarse</button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="breadcrumb-container">
        <nav class="breadcrumb">
            <a href="index.html"><i class="fas fa-home"></i> <span data-i18n="nav_home">Inicio</span></a>
            <i class="fas fa-chevron-right"></i>
            <a href="buscar-rutas.html" data-i18n="nav_routes">Rutas</a>
            <i class="fas fa-chevron-right"></i>
            <span id="breadcrumbTitle"></span>
        </nav>
    </div>

    <main class="route-detail-main">
        <!-- Header de la ruta -->
        <section class="route-header-section">
            <div class="route-header-content">
                <div class="route-header-info">
                    <div class="route-badges-top" id="routeBadges">
                        <!-- Badges dinÃ¡micos -->
                    </div>
                    <h1 id="routeTitle">Ruta seleccionada</h1>
                    <div class="route-location-header">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="routeLocation"></span>
                    </div>
                    <div class="route-meta-header">
                        <div class="rating-large">
                            <i class="fas fa-star"></i>
                            <span class="rating-number" id="routeRating"></span>
                            <span class="rating-reviews">(<span id="reviewsCount"></span> <span data-i18n="label_reviews">opiniones</span>)</span>
                        </div>
                        <div class="route-stats">
                            <div class="stat-item">
                                <i class="fas fa-route"></i>
                                <span><strong id="routeDistance"></strong> <span data-i18n="label_km">km</span></span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users"></i>
                                <span><strong id="routeTravelers"></strong> <span data-i18n="label_travelers">viajeros</span></span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span><strong id="routeFavorites"></strong> <span data-i18n="label_favorites">favoritos</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="route-header-price">
                    <div class="price-card">
                        <div class="price-label" data-i18n="price_from">Desde</div>
                        <div class="price-amount">
                            <span class="currency">â‚¬</span><span id="routePrice"></span>
                        </div>
                        <div class="price-per" data-i18n="price_per_person">por persona</div>
                        <button class="btn btn-primary btn-lg btn-block" id="bookNowBtn">
                            <i class="fas fa-calendar-check"></i> <span data-i18n="book_now">Reservar ahora</span>
                        </button>
                        <button class="btn btn-outline btn-block" id="addToFavBtn">
                            <i class="far fa-heart"></i> <span data-i18n="save_to_favorites">Guardar en favoritos</span>
                        </button>
                        <div class="share-buttons" id="shareButtons">
                            <!-- Botones de compartir dinÃ¡micos -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- GalerÃ­a de imÃ¡genes -->
        <section class="route-gallery" aria-labelledby="routeGalleryTitle">
            <h2 id="routeGalleryTitle">GalerÃ­a de la ruta</h2>
            <div class="gallery-main">
                <img src="images/Machu_Picchu.jpg" alt="Imagen principal" id="mainImage">
                <button class="gallery-fullscreen" id="fullscreenBtn">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            <div class="gallery-thumbnails" id="galleryThumbnails">
                <!-- Thumbnails dinÃ¡micos -->
            </div>
        </section>

        <div class="route-detail-container">
            <!-- Contenido principal -->
            <div class="route-main-content">
                <!-- Tabs de navegaciÃ³n -->
                <nav class="tabs-nav">
                    <button class="tab-btn active" data-tab="overview">
                        <i class="fas fa-info-circle"></i> <span data-i18n="tab_overview">DescripciÃ³n</span>
                    </button>
                    <button class="tab-btn" data-tab="itinerary">
                        <i class="fas fa-list"></i> <span data-i18n="tab_itinerary">Itinerario</span>
                    </button>
                    <button class="tab-btn" data-tab="map">
                        <i class="fas fa-map"></i> <span data-i18n="tab_map">Mapa</span>
                    </button>
                    <button class="tab-btn" data-tab="reviews">
                        <i class="fas fa-star"></i> <span data-i18n="tab_reviews">Opiniones</span>
                    </button>
                </nav>

                <!-- Tab: DescripciÃ³n -->
                <div class="tab-content active" id="overview">
                    <div class="content-section">
                        <h2 data-i18n="overview_title">Sobre esta ruta</h2>
                        <p class="lead" id="routeShortDescription"></p>
                        <p class="lead" id="routeDescription"></p>
                    </div>

                    <div class="content-section">
                        <h2 data-i18n="includes_title">Â¿QuÃ© incluye?</h2>
                        <div class="includes-grid" id="includesGrid">
                            <!-- Items dinÃ¡micos -->
                        </div>
                    </div>

                    <div class="content-section">
                        <h2 data-i18n="requirements_title">Requisitos y recomendaciones</h2>
                        <div class="requirements-list" id="requirementsList">
                            <!-- Requisitos dinÃ¡micos -->
                        </div>
                    </div>
                </div>

                <!-- Tab: Itinerario -->
                <div class="tab-content" id="itinerary">
                    <div class="itinerary-timeline" id="itineraryTimeline">
                        <!-- DÃ­as dinÃ¡micos -->
                    </div>
                </div>

                <!-- Tab: Mapa -->
                <div class="tab-content" id="map">
                    <div class="map-section">
                        <div id="routeMap" class="route-map"></div>
                        <div class="map-info" id="mapInfo">
                            <!-- Info dinÃ¡mica del recorrido -->
                        </div>
                    </div>

                    <div class="elevation-section">
                        <h3 data-i18n="elevation_title">Perfil de elevaciÃ³n</h3>
                        <canvas id="elevationChart"></canvas>
                    </div>
                </div>

                <!-- Tab: Opiniones -->
                <div class="tab-content" id="reviews">
                    <div class="reviews-summary" id="reviewsSummary">
                        <!-- Resumen dinÃ¡mico -->
                    </div>

                    <div class="reviews-filters" id="reviewsFilters">
                        <!-- Botones dinÃ¡micos -->
                    </div>

                    <div class="reviews-list" id="reviewsList">
                        <!-- ReseÃ±as dinÃ¡micas -->
                    </div>

                    <button class="btn btn-outline btn-lg btn-block" id="loadMoreReviewsBtn">
                        <i class="fas fa-plus"></i> <span data-i18n="reviews_load_more">Cargar mÃ¡s opiniones</span>
                    </button>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="route-sidebar">
                <div class="widget weather-widget">
                    <h3><i class="fas fa-cloud-sun"></i> <span data-i18n="weather_title">Clima actual</span></h3>
                    <div id="weatherData" class="weather-data">
                        <div class="weather-main">
                            <img src="images/Logo.png" alt="Clima" id="weatherIcon" class="weather-icon">
                            <div class="weather-temp">
                                <span id="temperature"></span>Â°C
                            </div>
                        </div>
                        <p id="weatherDescription"></p>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <i class="fas fa-tint"></i>
                                <span><span id="humidity"></span><span data-i18n="humidity_label">% humedad</span></span>
                            </div>
                            <div class="weather-detail">
                                <i class="fas fa-wind"></i>
                                <span><span id="windSpeed"></span><span data-i18n="wind_label"> km/h</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="widget organizer-widget">
                    <h3><i class="fas fa-user-circle"></i> <span data-i18n="organizer_title">Organizador</span></h3>
                    <div class="organizer-info">
                        <img src="images/Logo.png" alt="Organizador" class="organizer-avatar" id="organizerAvatar">
                        <div>
                            <h4 id="organizerName">Organizador</h4>
                            <div class="organizer-rating" id="organizerRating"></div>
                        </div>
                    </div>
                    <p id="organizerDescription"></p>
                    <button class="btn btn-outline btn-block" id="contactOrganizerBtn">
                        <i class="fas fa-envelope"></i> <span data-i18n="contact_btn">Contactar</span>
                    </button>
                </div>

                <div class="widget similar-routes-widget">
                    <h3><i class="fas fa-route"></i> <span data-i18n="similar_routes_title">Rutas similares</span></h3>
                    <div class="similar-routes-list" id="similarRoutesList">
                        <!-- Rutas similares dinÃ¡micas -->
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3 data-i18n="brand">Mochileros Sin Fronteras</h3>
                <p data-i18n="footer_about">Tu comunidad de viajeros y aventureros. Descubre el mundo con nosotros.</p>
                <div class="social-links" id="footerSocialLinks">
                    <!-- Redes dinÃ¡micas -->
                </div>
            </div>
            
            <div class="footer-section">
                <h4 data-i18n="footer_quick_links">Enlaces RÃ¡pidos</h4>
                <ul id="footerQuickLinks">
                    <!-- Links dinÃ¡micos -->
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 data-i18n="footer_legal">Legal</h4>
                <ul id="footerLegalLinks">
                    <!-- Links legales dinÃ¡micos -->
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 data-i18n="footer_newsletter">Newsletter</h4>
                <p data-i18n="footer_news_sub">Recibe nuestras Ãºltimas novedades</p>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" placeholder="Tu email" required>
                    <button type="submit" class="btn btn-primary" data-i18n="footer_subscribe">Suscribirse</button>
                </form>
            </div>
        </div>
        <div class="footer-bottom" id="footerBottom">
            <p data-i18n="footer_copyright">&copy; <span id="currentYear"></span> Mochileros Sin Fronteras. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="script/i18n.js" defer></script>
    <script src="script/detalle-ruta.js"></script>
    <script src="script/nav.js"></script>
    <script src="script/social-share.js"></script>
</body>
</html>
